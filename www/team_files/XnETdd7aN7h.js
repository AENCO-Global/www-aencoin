if (self.CavalryLogger) { CavalryLogger.start_js(["NBlGZ"]); }

__d("AdsLogger",["AdsInterfacesErrorTypes","AdsInterfacesLogEvents","AdsLoggerConstants","AdsUnifiedLoggingConfig","Banzai","ErrorUtils","EventEmitter","FBLogger","emptyFunction","performanceAbsoluteNow"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("AdsInterfacesLogEvents").EventCategory;h=babelHelpers.inherits(k,c("EventEmitter"));i=h&&h.prototype;function k(){h.apply(this,arguments)}var l=new k();function m(q,r){return r===j.ERROR&&q!==c("AdsInterfacesErrorTypes").PRELOADING_ISSUE}function n(q){__p&&__p();var r=q.normalized_error,s=q.loggerConfigName;if(!r){c("FBLogger")(s).warn("%s doesn't include a normalized error",q.event);return}var t=c("FBLogger")(s).catching(r);switch(q.event){case c("AdsInterfacesErrorTypes").CRITICAL_EXCEPTION:o(t,q);break;case c("AdsInterfacesErrorTypes").FATAL:t.warn("unhandled exception");break}}function o(q,r){switch(r.error_type){case"FLUX_CONTAINER":q.mustfix("%s crashed while being displayed",r.module_name);break;case"FLUX_STORE":q.mustfix("%s failed while dispatching %s",r.store_name,r.action_type_on_error);break;case"ERROR_BOUNDARY":q.mustfix("%s boundary caught a crash",r.module_name);break;case"VALIDATOR":q.warn("validation failed from %s",r.source);break}}function p(q,r,s,t){this.$AdsLogger2=q;this.$AdsLogger3=c("ErrorUtils").guard(r||c("emptyFunction").thatReturnsNull);this.$AdsLogger4=s||c("emptyFunction").thatReturnsNull;this.$AdsLogger1=t||"logger";c("ErrorUtils").addListener(function(u){if(this.__shouldSilenceError(u))return;var v={error_message:u.message,error_type:u.name,stack_trace:u.stack,error_data:JSON.stringify(u),error_script:u.script,error_line:u.line};this.logError(c("AdsLoggerConstants").UNHANDLED_JS_EXCEPTION_EVENT_NAME,v)}.bind(this))}p.prototype.__shouldSilenceError=function(q){return!!q.type&&q.type!=="mustfix"};p.prototype.logForAnalytics=function(q,r,s){__p&&__p();s=s||{};var t=s.vital===undefined?true:s.vital;delete s.vital;var u=babelHelpers["extends"]({},this.$AdsLogger3(),s,{event_category:q,event:r});this.$AdsLogger5(r||"",u,c("AdsUnifiedLoggingConfig").stack_traces);if(!u.event)u.stack_trace=new Error("No Event.").stack||"none";if(m(r,q))l.emit("error",babelHelpers["extends"]({},u,{loggerConfigName:this.$AdsLogger2,time:c("performanceAbsoluteNow")()}));delete u.normalized_error;c("Banzai").post(this.$AdsLogger1+":"+this.$AdsLogger2,u,t?c("Banzai").VITAL:c("Banzai").BASIC)};p.prototype.$AdsLogger6=function(q){if(q===1)return true;else if(q<=0)return false;else return Math.floor(Math.random()*Math.floor(q)+1)===1};p.prototype.$AdsLogger5=function(q,r,s){var t=s[q.toLowerCase()];if(t&&this.$AdsLogger6(t)){var u=new Error("Requested Stack-Trace."),v=c("ErrorUtils").normalizeError(u);r.stack_trace=v.stack}};p.prototype.logError=function(q,r){var s=this.$AdsLogger7();this.logForAnalytics(c("AdsLoggerConstants").ERROR_EVENT_CATEGORY,q,babelHelpers["extends"]({},r,s))};p.addErrorListener=function(q){l.addListener("error",q)};p.prototype.$AdsLogger7=function(){var q={};try{q=this.$AdsLogger4()}catch(r){q={reason:"Error while invoking app error callback!",rawError:r}}return q};p.addErrorListener(function(q){return n(q)});f.exports=p}),null);